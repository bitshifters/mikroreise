VERTS={
    { -19,-8,0 },
    { -19,-4.5,0 },
    { -16,-8,-1 },
    { -5,9,0 },
    { -5,-8,2 },
    { 5,-8,2 },
    { 0,3,-3.5 },
    { 0,9,0 },
    { 0,12,0 },
    { 5,9,0 },
    { 0,-8,-2 },
    { 16,-8,-1 },
    { 19,-4.5,0 },
    { 19,-8,0 },
    { -5,-8,-1 },
    { -2,-8,-1 },
    { -2,-8,1.5 },
    { -5,-8,1 },
    { 2,-8,-1 },
    { 5,-8,-1 },
    { 5,-8,1 },
    { 2,-8,1.5 },
}

SURFS={
    { 0,1,2 },
    { 1,3,2 },
    { 2,3,6 },
    { 2,6,10 },
    { 3,9,6 },
    { 10,6,11 },
    { 6,9,11 },
    { 11,9,12 },
    { 11,12,13 },
    { 13,9,5 },
    { 5,3,4 },
    { 4,3,0 },
    { 4,10,5 },  
}

-- TODO: Code to deinterleave MD_INDEX array.

for s=1,#SURFS do
    surf=SURFS[s]

    v1=VERTS[surf[1]+1]
    v2=VERTS[surf[2]+1]
    v3=VERTS[surf[3]+1]

    -- a ^ b = |a||b|sin theta n
    a={}
    a[1]=v2[1]-v1[1]
    a[2]=v2[2]-v1[2]
    a[3]=v2[3]-v1[3]

    b={}
    b[1]=v3[1]-v2[1]
    b[2]=v3[2]-v2[2]
    b[3]=v3[3]-v2[3]

    n={}
    n[1]=(a[2]*b[3]-a[3]*b[2])
    n[2]=-(a[1]*b[3]-a[3]*b[1])
    n[3]=(a[1]*b[2]-a[2]*b[1])

    len = math.sqrt(n[1]*n[1]+n[2]*n[2]+n[3]*n[3])

--    io.write(string.format("surf=%d [%f,%f,%f] [%f,%f,%f] [%f,%f,%f] n=[%f,%f,%f] len=%f\n",s,v1[1],v1[2],v1[3],v2[1],v2[2],v2[3],v3[1],v3[2],v3[3],n[1],n[2],n[3],len))
    io.write(string.format("    VECTOR3 %f, %f, %f\t; MD_SURF %d,%d,%d\n", n[1]/len, n[2]/len, n[3]/len,surf[1],surf[2],surf[3]))
end
